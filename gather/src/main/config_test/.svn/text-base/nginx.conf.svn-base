upstream go.gather.163.com{
        server 10.100.20.246:6801;
}

server {
        listen 80;
        server_name gather.163.com test.gather.163.com;
        #charset utf-8;

        access_log  logs/gather.163.com_access.log  main;
        error_log  logs/gather.163.com_error.log  ;

        ssi on;
        ssi_silent_errors on;
        ssi_types text/shtml;
        location  / {
                root /home/workspace/gather/html;
                index  index.html index.htm;
                error_page 500 400 403 404  /error/404.html;
        }

        location ~ ^/(css|js|images|html|inc|include|data|json) {
               root /home/workspace/gather/html;
               index  index.html index.htm;
        }

        location ~ ^(/demo/) {
			proxy_pass http://go.gather.163.com;
			proxy_set_header Host go.gather.163.com;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location ~ ^(/specialApi/) {
            proxy_pass http://go.gather.163.com;
            proxy_set_header Host go.gather.163.com;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
}
